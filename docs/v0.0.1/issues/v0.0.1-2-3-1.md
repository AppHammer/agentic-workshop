# Title: v0.0.1-2-3-1 - Create Unread Message Count Endpoint

## Summary: 
Create a new backend endpoint `/messages/unread-count` that returns the total count of unread messages for the current user, optimized with database indexing for fast queries.

### Acceptance Criteria:
- [ ] GET /messages/unread-count endpoint created
- [ ] Returns accurate count of unread messages for current user
- [ ] Query uses database index on `read` and `receiver_id` fields
- [ ] Response time <50ms even with 1000+ messages in database
- [ ] Only counts messages where current user is receiver
- [ ] Returns JSON: `{"unread_count": <number>}`
- [ ] Requires authentication (JWT token)
- [ ] Integration tests verify count accuracy

### Test Strategy:

**Integration Tests (pytest):**
- Test unread count with no unread messages (returns 0)
- Test unread count with multiple unread messages
- Test only counts messages where user is receiver (not sender)
- Test count updates after marking messages as read
- Test unauthorized access (no JWT) returns 401
- Performance test with 1000+ messages

**Tools:** pytest, pytest-asyncio, FastAPI TestClient, pytest-benchmark
**Coverage Target:** >90%

---

## ğŸ“ Code Changes

**Description:**
Create a new endpoint that efficiently counts unread messages for the authenticated user.

**File:** `app/backend/main.py`

```python
@app.get("/messages/unread-count")
async def get_unread_count(
    current_user: User = Depends(get_current_user),
    db: Session = Depends(get_db)
):
    """Get count of unread messages for current user"""
    count = db.query(Message).filter(
        Message.receiver_id == current_user.id,
        Message.read == False
    ).count()
    
    return {"unread_count": count}
```

---

## ğŸ“¡ API Specs (If Applicable)

```yaml
openapi: 3.0.0
paths:
  /messages/unread-count:
    get:
      summary: Get count of unread messages for current user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Unread message count
          content:
            application/json:
              schema:
                type: object
                properties:
                  unread_count:
                    type: integer
                    example: 5
        '401':
          description: Unauthorized - invalid or missing JWT token
```

---

## Issue Dependencies

**Blocks:**
- v0.0.1-2-3-2 - Add Unread Message Badges to Frontend

## Related Issues

- v0.0.1-2-3-2 - Add Unread Message Badges to Frontend
- v0.0.1-3-4-1 - Implement Message Polling System