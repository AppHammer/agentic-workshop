# Title: v0.0.2-2-1-1 - Create Customer Profile View Component

## Summary: 
Create a new Profile component that displays customer account information including email, full name, role, phone, location, and account creation date. This component fetches user data from the existing `/users/me` endpoint and presents it in a clean, organized, read-only layout.

### Acceptance Criteria:
- [ ] New `Profile.js` component created in `app/frontend/src/components/`
- [ ] Component fetches user data using existing `getCurrentUser()` API function
- [ ] All six common fields displayed: full_name, email, role, phone, location, created_at
- [ ] Date formatting converts ISO timestamp to human-readable format (e.g., "November 10, 2025")
- [ ] Role displayed with first letter capitalized (e.g., "Customer" not "customer")
- [ ] Null/empty optional fields (phone, location) display "Not provided" placeholder
- [ ] Loading state displayed while data is being fetched
- [ ] Error state handled gracefully with user-friendly message
- [ ] Protected route added in App.js for `/profile` (redirects to login if not authenticated)
- [ ] Sensitive fields (id, hashed_password) never displayed
- [ ] Component structure supports future addition of tasker-specific fields

### Test Strategy:

**Manual Testing:**
- Test profile page loads for authenticated customer user
- Test all fields display correctly with complete data
- Test placeholder text appears for null phone and location
- Test date formatting is human-readable
- Test loading spinner appears during data fetch
- Test error message displays if API call fails
- Test unauthenticated user redirects to login page
- Test navigation from navbar username link works

**Data Scenarios:**
- Customer with complete profile (all fields filled)
- Customer with minimal profile (phone and location null)
- Test with various date formats from backend
- Test with long email addresses and names

**Error Scenarios:**
- API endpoint returns 401 (should redirect to login)
- API endpoint returns 500 (should show error message)
- Network timeout (should show error message)

---

## ‚ú® New Files (If Applicable)

- `app/frontend/src/components/Profile.js`

---

## üìù Code Changes

**Description:**
Create a new React component that fetches and displays user profile information. The component uses hooks for state management (useState, useEffect) and the existing API service layer to retrieve user data.

**File:** `app/frontend/src/components/Profile.js` (NEW FILE)

```jsx
import React, { useState, useEffect } from 'react';
import { getCurrentUser } from '../api';

function Profile() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchProfile = async () => {
      try {
        const userData = await getCurrentUser();
        setUser(userData);
      } catch (err) {
        setError('Failed to load profile. Please try again.');
        console.error('Profile fetch error:', err);
      } finally {
        setLoading(false);
      }
    };
    fetchProfile();
  }, []);

  // Format date helper function
  const formatDate = (dateString) => {
    if (!dateString) return 'N/A';
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
  };

  // Capitalize first letter of role
  const formatRole = (role) => {
    if (!role) return 'N/A';
    return role.charAt(0).toUpperCase() + role.slice(1);
  };

  if (loading) {
    return (
      <div className="profile-container">
        <div className="loading-message">Loading profile...</div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="profile-container">
        <div className="error-message">{error}</div>
      </div>
    );
  }

  if (!user) {
    return (
      <div className="profile-container">
        <div className="error-message">No profile data available</div>
      </div>
    );
  }

  return (
    <div className="profile-container">
      <h2>My Profile</h2>
      
      <div className="profile-section">
        <h3>Account Information</h3>
        
        <div className="profile-field">
          <label className="field-label">Full Name:</label>
          <span className="field-value">{user.full_name}</span>
        </div>
        
        <div className="profile-field">
          <label className="field-label">Email:</label>
          <span className="field-value">{user.email}</span>
        </div>
        
        <div className="profile-field">
          <label className="field-label">Role:</label>
          <span className="field-value">{formatRole(user.role)}</span>
        </div>
        
        <div className="profile-field">
          <label className="field-label">Phone:</label>
          <span className="field-value">{user.phone || 'Not provided'}</span>
        </div>
        
        <div className="profile-field">
          <label className="field-label">Location:</label>
          <span className="field-value">{user.location || 'Not provided'}</span>
        </div>
        
        <div className="profile-field">
          <label className="field-label">Member Since:</label>
          <span className="field-value">{formatDate(user.created_at)}</span>
        </div>
      </div>
    </div>
  );
}

export default Profile;
```

---

## üìù Code Changes

**Description:**
Add a protected route for the profile page in App.js. The route renders the Profile component if the user is authenticated, otherwise redirects to the login page.

**File:** `app/frontend/src/App.js`

```diff
  import React, { useState, useEffect } from 'react';
  import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
  import Login from './components/Login';
  import Register from './components/Register';
  import CustomerDashboard from './components/CustomerDashboard';
  import TaskerDashboard from './components/TaskerDashboard';
  import TaskDetail from './components/TaskDetail';
+ import Profile from './components/Profile';
  import { getCurrentUser } from './api';
  import './index.css';

  // ... existing code ...

  return (
    <Router>
      <Routes>
        <Route path="/login" element={<Login onLogin={handleLogin} />} />
        <Route path="/register" element={<Register />} />
        <Route path="/customer-dashboard" element={
          isAuthenticated ? <CustomerDashboard user={user} onLogout={handleLogout} /> : <Navigate to="/login" />
        } />
        <Route path="/tasker-dashboard" element={
          isAuthenticated ? <TaskerDashboard user={user} onLogout={handleLogout} /> : <Navigate to="/login" />
        } />
        <Route path="/tasks/:id" element={
          isAuthenticated ? <TaskDetail user={user} /> : <Navigate to="/login" />
        } />
+       <Route path="/profile" element={
+         isAuthenticated ? <Profile /> : <Navigate to="/login" />
+       } />
        <Route path="/" element={<Navigate to={isAuthenticated ? (user?.role === 'customer' ? '/customer-dashboard' : '/tasker-dashboard') : '/login'} />} />
      </Routes>
    </Router>
  );
```

---

## üìù Code Changes

**Description:**
Add CSS styling for the profile page to create a clean, organized, professional layout with proper spacing, visual hierarchy, and accessibility.

**File:** `app/frontend/src/index.css`

```css
/* Profile Page Styles */
.profile-container {
  max-width: 800px;
  margin: 40px auto;
  padding: 20px;
}

.profile-container h2 {
  color: #333;
  margin-bottom: 30px;
  font-size: 28px;
  border-bottom: 2px solid #007bff;
  padding-bottom: 10px;
}

.profile-section {
  background: #f9f9f9;
  padding: 25px;
  border-radius: 8px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.profile-section h3 {
  color: #555;
  margin-top: 0;
  margin-bottom: 20px;
  font-size: 20px;
}

.profile-field {
  display: flex;
  margin-bottom: 15px;
  padding: 12px;
  background: white;
  border-radius: 4px;
  border-left: 3px solid #007bff;
}

.field-label {
  font-weight: 600;
  min-width: 150px;
  color: #555;
  flex-shrink: 0;
}

.field-value {
  color: #333;
  flex: 1;
  word-break: break-word;
}

.loading-message,
.error-message {
  text-align: center;
  padding: 40px;
  font-size: 18px;
}

.loading-message {
  color: #666;
}

.error-message {
  color: #d32f2f;
  background: #ffebee;
  border-radius: 8px;
  padding: 20px;
}

/* Responsive design for mobile */
@media (max-width: 768px) {
  .profile-container {
    margin: 20px auto;
    padding: 10px;
  }
  
  .profile-field {
    flex-direction: column;
  }
  
  .field-label {
    min-width: auto;
    margin-bottom: 5px;
  }
}
```

---

## üì° API Specs (If Applicable)

**Endpoint Used:** `GET /users/me` (already implemented)

**Response Schema:**
```json
{
  "id": 1,
  "email": "customer@example.com",
  "full_name": "John Doe",
  "role": "customer",
  "phone": "555-1234",
  "location": "New York, NY",
  "created_at": "2025-11-10T10:30:00.000Z",
  "skills": null,
  "hourly_rate": null,
  "bio": null
}
```

**Notes:**
- Uses existing authenticated endpoint (requires JWT token)
- Returns complete user object including tasker-specific fields (even for customers)
- Frontend component only displays customer-relevant fields in this issue
- Tasker-specific fields (skills, hourly_rate, bio) will be handled in v0.0.2-2-2-1

---

## üì¶ Dependencies (If Applicable)

**Package Manager:** `npm`

No new dependencies required. Uses existing dependencies:
- `react` (already installed)
- `react-router-dom` (already installed)
- API service from `./api.js` (already implemented)

---

## Issue Dependencies

**Depends on:**
- v0.0.2-1-1-1 - Make Username Clickable for Profile Navigation (provides entry point)

**Blocks:**
- v0.0.2-2-2-1 - Tasker Profile View with Professional Details (extends this component)
- v0.0.2-2-3-1 - Read-Only Profile Display Styling (applies to this component)
- v0.0.2-3-1-1 - Dashboard Navigation from Profile (requires profile page to exist)

## Related Issues

- v0.0.2-1-1-1 - Make Username Clickable for Profile Navigation
- v0.0.2-2-2-1 - Tasker Profile View with Professional Details
- v0.0.2-3-1-1 - Dashboard Navigation from Profile