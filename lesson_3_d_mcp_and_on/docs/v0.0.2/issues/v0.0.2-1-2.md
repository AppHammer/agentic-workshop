# Title: v0.0.2-1-2-1 - Update Profile Data

## Summary: 
This task involves implementing the functionality to save a user's updated profile information. This includes creating a new backend endpoint to handle the data update, as well as implementing the client-side logic to send the updated data to the server.

### Acceptance Criteria:
- When in "edit mode" on the profile page, modifying one or more fields and clicking "Save" should send the updated information to the server.
- The page should return to "view mode" and display the new information.
- A `PUT` request should be sent to the `/api/users/me` endpoint with the updated data.
- The request payload should be a JSON object containing only the modified fields.
- The email field must be a valid email format, and the hourly rate must be a positive number.
- If the API returns an error, a user-friendly error message should be displayed.

### Test Strategy:
- **Unit Testing:**
  - **Frontend:** Use Jest and React Testing Library to test the `handleSave` function in `Profile.jsx`. Mock the API call to verify that it is called with the correct data.
  - **Backend:** Use Pytest to test the `PUT /api/users/me` endpoint. Test with valid and invalid data to ensure validation is working correctly.
- **Integration Testing:**
  - Test the full data flow from the client to the database to ensure the user's profile is updated correctly.
- **Manual Testing:**
  - Log in, navigate to the profile page, and edit the profile information.
  - Click "Save" and verify that the updated information is displayed.
  - Attempt to save with invalid data (e.g., an invalid email) and verify that an error message is displayed.

---

## ðŸ“ Code Changes

**Description:**
A new `handleSave` function will be added to the `Profile.jsx` component to handle the submission of the updated user data. This function will make a `PUT` request to the `/api/users/me` endpoint with the new data.

**File:** `frontend/src/pages/Profile.jsx`
```diff
- // Save and Cancel handlers will be implemented in subsequent tasks.
+ const handleSave = async () => {
+     try {
+         const response = await api.put('/users/me', formData);
+         setUser(response.data);
+         setIsEditing(false);
+     } catch (error) {
+         console.error('Failed to update profile', error);
+         // In a real app, you'd show a user-friendly error message here.
+     }
+ };
```

---

## âœ¨ New Files (If Applicable)

- `backend/schemas.py` (a new `UserUpdate` schema will be added to this file)

---

## ðŸ“„ JSON Contracts (If Applicable)

**Contract Name:** `UserUpdate.json`

```json
{
  "email": "new.email@example.com",
  "skills": "React, Python, FastAPI",
  "hourly_rate": 55.0
}
```

---

## ðŸ“¡ API Specs (If Applicable)

```yaml
openapi: 3.0.0
info:
  title: Tasker API
  version: 1.0.0
paths:
  /users/me:
    put:
      summary: Update the current user's profile
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
      responses:
        '200':
          description: The updated user object
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
components:
  schemas:
    UserUpdate:
      type: object
      properties:
        email:
          type: string
          format: email
        skills:
          type: string
        hourly_rate:
          type: number
          format: float
          exclusiveMinimum: 0
```

---

## Issue Dependencies

- v0.0.2-1-1: Enable Edit Mode

## Related Issues

- v0.0.2-1-3: Cancel Edit Mode