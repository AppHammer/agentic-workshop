# Title: v0.0.1-2-3-2 - Add Unread Message Badges to Frontend

## Summary: 
Add unread message count badges to the main navigation and conversation list, providing visual indicators for new messages requiring user attention.

### Acceptance Criteria:
- [ ] Navbar displays unread count badge next to Messages link
- [ ] Badge shows total unread count across all conversations
- [ ] Conversation list shows unread count per conversation
- [ ] Badge hidden when count is 0 (not displayed as "0")
- [ ] Badge displays "99+" for counts over 99
- [ ] Badge styling: accessible color contrast (WCAG 2.1 AA)
- [ ] Badge updates automatically via polling
- [ ] Screen reader announces unread counts
- [ ] CSS matches design system

### Test Strategy:

**Unit Tests (Jest/React Testing Library):**
- Test navbar badge displays correct count
- Test navbar badge hidden when count is 0
- Test "99+" display for large counts
- Test per-conversation unread badges
- Test badge accessibility (aria-label)
- Test badge updates on state change

**Tools:** Jest, React Testing Library
**Coverage Target:** >85%

---

## ðŸ–¥ï¸ Front End Components (If Applicable)

**Component Name:** `Navbar.js`

**Description:**
Add unread message count badge to the navigation bar's Messages link.

**Code:**

```jsx
// app/frontend/src/components/Navbar.js

import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { getUnreadCount } from '../api';

const Navbar = ({ user }) => {
  const [unreadCount, setUnreadCount] = useState(0);
  
  useEffect(() => {
    if (user) {
      loadUnreadCount();
      // Poll for updates every 10 seconds
      const interval = setInterval(loadUnreadCount, 10000);
      return () => clearInterval(interval);
    }
  }, [user]);
  
  const loadUnreadCount = async () => {
    try {
      const data = await getUnreadCount();
      setUnreadCount(data.unread_count);
    } catch (error) {
      console.error('Error loading unread count:', error);
    }
  };
  
  const formatUnreadCount = (count) => {
    if (count === 0) return null;
    if (count > 99) return '99+';
    return count;
  };
  
  return (
    <nav className="navbar">
      <Link to="/">Home</Link>
      <Link to="/tasks">Tasks</Link>
      <Link to="/messages" className="messages-link">
        Messages
        {unreadCount > 0 && (
          <span 
            className="unread-badge"
            aria-label={`${unreadCount} unread messages`}
          >
            {formatUnreadCount(unreadCount)}
          </span>
        )}
      </Link>
      <Link to="/profile">{user?.full_name}</Link>
    </nav>
  );
};

export default Navbar;
```

**File:** `app/frontend/src/api.js`

```diff
+ export const getUnreadCount = async () => {
+   const response = await api.get('/messages/unread-count');
+   return response.data;
+ };
```

**File:** `app/frontend/src/index.css`

```css
/* Unread message badge styles */
.unread-badge {
  display: inline-block;
  min-width: 20px;
  padding: 2px 6px;
  margin-left: 8px;
  background-color: #dc3545; /* Red */
  color: #ffffff;
  font-size: 12px;
  font-weight: bold;
  border-radius: 10px;
  text-align: center;
}

.conversation-item .unread-badge {
  margin-left: auto;
  background-color: #007bff; /* Blue */
}

/* Ensure sufficient contrast for accessibility */
@media (prefers-contrast: high) {
  .unread-badge {
    border: 2px solid #ffffff;
  }
}
```

---

## Issue Dependencies

**Depends on:**
- v0.0.1-2-3-1 - Create Unread Message Count Endpoint (Backend)
- v0.0.1-2-1-2 - Update Messages Component to Display User Details

**Blocks:**
- v0.0.1-3-4-1 - Implement Message Polling System

## Related Issues

- v0.0.1-2-3-1 - Create Unread Message Count Endpoint
- v0.0.1-3-4-1 - Implement Message Polling System